# CI/CD и Docker Проекта YaMDb

![Workflow tests](https://github.com/andmerk93/yamdb_final/actions/workflows/yamdb_workflow.yml/badge.svg)

Проект YaMDb собирает отзывы пользователей на произведения. Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку.


## Возможности:
- Регистрация пользователей
- Аутентификация пользователей по JSON Web Token
- Получение, создание, обновление и удаление отзывов
- Получение, создание, обновление и удаление комментариев к отзывам
- Получение, создание и удаление категорий
- Получение, создание и удаление жанров
- Каждый пользователь может редактировать и удалять свои записи
- Возможно наделение пользователей правами модерирования и администрирования
- Удобная панель администрирования, на русском (требует создание пользователя с правами администратора, средствами движка Django)

## Описание работы:
На сайте не предусмотрено нормального веб-интерфейса, всё работает через REST API. Есть перечень эндпоинтов на главной странице и подробное описание на /redoc. Также, можно воспользоваться стандартным интерфейсом DRF, но только для анонимного чтения (посты и комментарии). 

## Требования (описано в requirements.txt):
- Django 3.2.16
- pytest 6.2.4
- pytest-pythonpath 0.7.3
- pytest-django 4.4.0
- djangorestframework 3.12.4
- djangorestframework-simplejwt 4.7.2
- PyJWT 2.1.0
- requests 2.26.0
- django-filter 22.1
- PyYAML 6.0
- coreapi 2.3.3
- и их зависимости

## Установка на тестовом стенде:
Клонировать репозиторий на машину, с которой будет будет запускаться сервис (либо по SSH-ссылке, либо скопировать и распаковать zip-архив)

```
git clone https://github.com/andmerk93/infra_sp2.git
```

На машине должны быть установлены Docker и Docker-compose актуальной версии

Нужно перейти в папку infra_sp2/infra  
Дальнейшие команды будут выполняться отсюда
Нужно собрать контейнер 
```
docker-compose up -d --build
```

Выполнить миграции:

```
docker-compose exec web python manage.py migrate
```

Собрать статику:

```
docker-compose exec web python manage.py collectstatic --no-input
```

Создать суперпользователя (опционально):

```
docker-compose exec web python manage.py createsuperuser
```

Тестовый сервер должен запуститься, и быть доступен по http://127.0.0.1/
Остановка сервера выполняется в Docker. 

Для теста панели администратора нужно создать суперпользователя.

Панель администратора будет доступна по http://127.0.0.1/admin/